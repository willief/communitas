<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Saorsa Core â€” Agents API</title>
    <meta name="description" content="Saorsa-core Agents API: identities, groups, messaging, virtual disk, transport, and canonical signing." />
    
    <!-- Inter Font - Same as saorsalabs.com -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <span class="logo-text">Communitas</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#features">Features</a></li>
                <li><a href="agents.html">Agents API</a></li>
                <li><a href="agents-core.html" style="color: var(--text-primary); font-weight: 600;">Core API</a></li>
                <li><a href="https://github.com/dirvine/communitas" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <main style="padding-top: 80px;">
        <section class="hero" style="padding: 4rem 0 3rem;">
            <div class="hero-container">
                <h1 style="font-size: 2.5rem;">Saorsa Core API</h1>
                <p class="hero-subtitle">Core primitives for Communitas: DHT, QUIC, identities, groups, messaging, and virtual disks</p>
                <div class="hero-buttons">
                    <a href="https://github.com/dirvine/saorsa-core" class="btn btn-primary" target="_blank" rel="noopener">View on GitHub</a>
                    <a href="https://docs.rs/saorsa-core" class="btn btn-secondary" target="_blank" rel="noopener">Rust Docs</a>
                    <a href="agents.html" class="btn btn-secondary">Communitas API</a>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="cta-section">
                    <div id="loading" style="color: var(--text-secondary);">Loading saorsa-core/AGENTS_API.mdâ€¦</div>
                    <article id="content" style="text-align: left; display: none;"></article>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 Saorsa Labs Limited. Dual-licensed under AGPL-3.0 and Commercial terms.</p>
            </div>
        </div>
    </footer>

    <script>
      (async function() {
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        
        // Since saorsa-core is a separate repository, we'll show a helpful message with links
        const coreContent = `
          <h2>Saorsa Core API Documentation</h2>
          <p>Saorsa Core is the foundational library that powers Communitas, providing:</p>
          
          <h3>Core Components</h3>
          <ul>
            <li><strong>Identity System</strong> - Four-Word addresses with ML-DSA signatures</li>
            <li><strong>Groups</strong> - Threshold-ready group identities with membership management</li>
            <li><strong>Messaging</strong> - End-to-end encrypted messaging with channel support</li>
            <li><strong>Virtual Disks</strong> - Per-entity storage with Private/Public/Shared policies</li>
            <li><strong>DHT</strong> - Trust-weighted Kademlia with quorum and telemetry</li>
            <li><strong>Transport</strong> - QUIC via ant-quic, WebRTC DataChannel bridge</li>
            <li><strong>Cryptography</strong> - Post-quantum (ML-DSA/ML-KEM) with ChaCha20-Poly1305</li>
          </ul>
          
          <h3>Key APIs</h3>
          <h4>Identity Operations</h4>
          <pre><code>identity_claim(words, pubkey, sig) -> Result<()>
identity_fetch(id: Key) -> IdentityPacketV1
identity_set_website_root(id, website_root, sig) -> Result<()></code></pre>
          
          <h4>Group Management</h4>
          <pre><code>group_identity_create(words, members) -> (GroupIdentityPacketV1, GroupKeyPair)
group_identity_update_members_signed(id, new_members, group_pk, group_sig) -> Result<()>
group_member_add(id, member, group_pk, group_sig) -> Result<()></code></pre>
          
          <h4>Messaging Service</h4>
          <pre><code>MessagingService::new(four_word_addr, DhtClient) -> Self
send_message_to_channel(channel_id, content, options) -> (MessageId, DeliveryReceipt)
subscribe_messages(channel_filter) -> broadcast::Receiver<ReceivedMessage></code></pre>
          
          <h4>Virtual Disk & Website</h4>
          <pre><code>disk_create(entity_id, DiskType, DiskConfig) -> DiskHandle
disk_write(&handle, path, content, FileMetadata) -> WriteReceipt
website_publish(entity_id, website_root) -> PublishReceipt</code></pre>
          
          <h3>Resources</h3>
          <ul>
            <li><a href="https://docs.rs/saorsa-core" target="_blank" rel="noopener">ðŸ“š Full API Documentation on docs.rs</a></li>
            <li><a href="https://crates.io/crates/saorsa-core" target="_blank" rel="noopener">ðŸ“¦ Package on crates.io</a></li>
            <li><a href="https://github.com/dirvine/saorsa-core" target="_blank" rel="noopener">ðŸ’» Source Code on GitHub</a></li>
          </ul>
          
          <h3>Version</h3>
          <p>Current version: <strong>0.3.17</strong></p>
          
          <h3>Installation</h3>
          <pre><code># Add to Cargo.toml
[dependencies]
saorsa-core = "0.3.17"</code></pre>
        `;
        
        try {
          content.innerHTML = marked.parse(coreContent);
          loading.style.display = 'none';
          content.style.display = 'block';
        } catch (e) {
          loading.textContent = 'Failed to render content: ' + (e && e.message ? e.message : e);
        }
      })();
    </script>
  </body>
  </html>